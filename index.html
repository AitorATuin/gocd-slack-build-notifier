<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="./img/favicon.ico">

	<title>GoCD Slack Notifier</title>

        <link href="./css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="./css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="./css/highlight.css">
        <link href="./css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href=".">GoCD Slack Notifier</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li class="active">
                    <a href=".">Home</a>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                <li class="disabled">
                    <a rel="next" >
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li class="disabled">
                    <a rel="prev" >
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#gocd-slack-build-notifier">gocd-slack-build-notifier</a></li>
        
            <li><a href="#setup">Setup</a></li>
        
            <li><a href="#configuration">Configuration</a></li>
        
            <li><a href="#pipeline-rules">Pipeline Rules</a></li>
        
            <li><a href="#screenshots">Screenshots</a></li>
        
            <li><a href="#license">License</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<p><a href="https://snap-ci.com/ashwanthkumar/gocd-slack-build-notifier/branch/master"><img alt="Build Status" src="https://snap-ci.com/ashwanthkumar/gocd-slack-build-notifier/branch/master/build_image" /></a></p>
<h1 id="gocd-slack-build-notifier">gocd-slack-build-notifier</h1>
<p>Slack based GoCD build notifier</p>
<h2 id="setup">Setup</h2>
<p>Download jar from <a href="https://github.com/ashwanthkumar/gocd-slack-build-notifier/releases">releases</a> &amp; place it in /plugins/external &amp; restart Go Server.</p>
<h2 id="configuration">Configuration</h2>
<p>All configurations are in <a href="https://github.com/typesafehub/config">HOCON</a> format. Plugin searches for the configuration file in the following order</p>
<ol>
<li>File defined by the environment variable <code>GO_NOTIFY_CONF</code>.</li>
<li><code>go_notify.conf</code> at the user's home directory. Typically it's the <code>go</code> user's home directory (<code>/var/go</code>).</li>
<li><code>go_notify.conf</code> present at the <code>CRUISE_SERVER_DIR</code> environment variable location.</li>
</ol>
<p>Minimalistic configuration would be something like</p>
<pre><code class="hocon">gocd.slack {
  login = &quot;someuser&quot;
  password = &quot;somepassword&quot;
  server-host = &quot;http://localhost:8153/&quot;
  api-server-host = &quot;http://localhost:8153/&quot;
  webhookUrl = &quot;https://hooks.slack.com/services/....&quot;

  # optional fields
  channel = &quot;#build&quot;
  slackDisplayName = &quot;gocd-slack-bot&quot;
  slackUserIconURL = &quot;http://example.com/slack-bot.png&quot;
  displayMaterialChanges = true
  proxy {
    hostname = &quot;localhost&quot;
    port = &quot;5555&quot;
    type = &quot;socks&quot; # acceptable values are http / socks
  }
}
</code></pre>

<ul>
<li><code>login</code> - Login for a Go user who is authorized to access the REST API.</li>
<li><code>password</code> - Password for the user specified above. You might want to create a less privileged user for this plugin.</li>
<li><code>server-host</code> - FQDN of the Go Server. All links on the slack channel will be relative to this host.</li>
<li><code>api-server-host</code> - This is an optional attribute. Set this field to localhost so server will use this endpoint to get <code>PipelineHistory</code> and <code>PipelineInstance</code>  </li>
<li><code>webhookUrl</code> - Slack Webhook URL</li>
<li><code>channel</code> - Override the default channel where we should send the notifications in slack. You can also give a value starting with <code>@</code> to send it to any specific user.</li>
<li><code>displayMaterialChanges</code> - Display material changes in the notification (git revisions for example). Defaults to true, set to false if you want to hide.</li>
<li><code>proxy</code> - Specify proxy related settings for the plugin.</li>
<li><code>proxy.hostname</code> - Proxy Host</li>
<li><code>proxy.port</code> - Proxy Port</li>
<li><code>proxy.type</code> - <code>socks</code> or <code>http</code> are the only accepted values.</li>
</ul>
<h2 id="pipeline-rules">Pipeline Rules</h2>
<p>By default the plugin pushes a note about all failed stages across all pipelines to Slack. You have fine grain control over this operation.</p>
<pre><code class="hocon">gocd.slack {
  server-host = &quot;http://localhost:8153/&quot;
  webhookUrl = &quot;https://hooks.slack.com/services/....&quot;

  pipelines = [{
    name = &quot;gocd-slack-build&quot;
    stage = &quot;build&quot;
    state = &quot;failed|passed&quot;
    channel = &quot;#oss-build-group&quot;
    owners = [&quot;ashwanthkumar&quot;]
  },
  {
    name = &quot;.*&quot;
    stage = &quot;.*&quot;
    state = &quot;failed&quot;
  }]
}
</code></pre>

<p><code>gocd.slack.pipelines</code> contains all the rules for the go-server. It is a list of rules (see below for what the parameters mean) for various pipelines. The plugin will pick the first matching pipeline rule from the pipelines collection above, so your most specific rule should be first, with the most generic rule at the bottom.</p>
<ul>
<li><code>name</code> - Regex to match the pipeline name</li>
<li><code>stage</code> - Regex to match the stage name</li>
<li><code>state</code> - State of the pipeline at which we should send a notification. You can provide multiple values separated by pipe (<code>|</code>) symbol. Valid values are passed, failed, cancelled, building, fixed, broken or all.</li>
<li><code>channel</code> - (Optional) channel where we should send the slack notification. This setting for a rule overrides the global setting</li>
<li><code>owners</code> - (Optional) list of slack user handles who must be tagged in the message upon notifications</li>
</ul>
<h2 id="screenshots">Screenshots</h2>
<p><img src="https://raw.githubusercontent.com/ashwanthkumar/gocd-slack-build-notifier/master/images/gocd-slack-notifier-demo-with-changes.png" width="400"/>
<img src="https://raw.githubusercontent.com/ashwanthkumar/gocd-slack-build-notifier/master/images/gocd-slack-notifier-demo.png" width="400"/></p>
<h2 id="license">License</h2>
<p><a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            
            <center>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</center>
        </footer>

        <script src="./js/jquery-1.10.2.min.js"></script>
        <script src="./js/bootstrap-3.0.3.min.js"></script>
        <script src="./js/highlight.pack.js"></script>
        <script>var base_url = '.';</script>
        <script data-main="./mkdocs/js/search.js" src="./mkdocs/js/require.js"></script>
        <script src="./js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>